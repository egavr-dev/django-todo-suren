# Сайт на Django. Создание проекта, знакомство с шаблонами.
Ссылка на документацию Django официальный сайт там есть
пример и упражнения, и можно его пройти.
[link](https://docs.djangoproject.com/en/5.1/)
 
- `which python` - Проверка какой Python используется в терминале Linux.
- `where python` - Проверка, какой Python используется в терминале windows
- `python -V` - Проверка версии Python 
- `pip install django` - установка django в виртуальное окружение
- `pip install --upgrade pip` - Обновление pip в виртуальном окружении
- `pip -V` - Проверка версии pip в виртуальном окружении
- `pip list` - Посмотрим какие пакеты установленны в виртуальном окружении
- `pip freeze > requirements.txt` - командой зафиксируем наши зависимости для установленного django
- `python -m django --version` - тут 'm' означает модуль, а 'django' к этому модулю обращаемся, '--version' узнать версию
- `django-admin --version` - команда делает ровно тоже самое
- `which django-admin` - посмотреть путь до django-admin


## Перейдем к созданию проекта
- `python -m django startproject todo_manager` - создаем проект с название todo_project
### Название проекта не должно иметь: test, project, '-' правила как с созданием имен переменных
- `django-admin startproject todo_manager` - либо такая равнозначная команда
### Определили что проект будет называться todo_manager


## Перейдем к рассмотрению, что у нас создалось
- создалась папка todo_manager. 
  - В этой папке файл manage.py этот файл нужен для запуска нашего проект, и создания новых django приложения, а также выполнять другие команды
  - В этой папке еще одна папка todo_manager. 
        - В ней файл urls.py В файле находятся пути и настраиваются ссылки
        - В ней файл (settings.py) в котором, настройки для проекта. Настроек много. В этом файле, не все настройки, для проекта.
            Импортируется Path из pathlib, для нахождения пути к базовой директории.
            Тут импортируется путь к базовой директории BASE_DIR. Базовая директория это родитель текущего файла и родитель этого родителя (очень важно это знать, где именно у нас корень нашего проекта).
            Тут также есть SECRET_KEY должен быть секретным и в реальном проекте, его нельзя никому показывать.
            Тут есть флаг DEBUG = TRUE значит "дебаг" режим включен. Пока не меняем, флаг помогает видеть все сообщения о проблемах или ошибках.
            Тут INSTALLED_APPS это список установленных приложений.
            Тут ROOT_URLCONF = 'todo_manager.urls' это то где у нас конфигурация по urls. (то есть от корня проекта далее папка todo_manager и в ней файл urls)
            Тут TEMPLATES это список шаблонов где нам нужно будет указывать где искать наши шаблоны
            ну и куча других настроек
  
### Ничего не меняя в этих файлах уже сможем запустить наше приложение

## Перейдем к запуску нашего приложения!
Нужно обязательно перейти в папку м проектом
- `cd todo_manager` - такой командой перейдем в папку с созданным проектом
- `python manage.py runserver` - этой командой можем запустить наш проект (то есть сервер)
При запуске важно что бы файл manage.py лежал в папке.
И увидим по ссылке, что сервер запустился http://127.0.0.1:8000/ (адрес по умолчанию).
Видим что нам говорят что у нас не применены миграции 
'You have 18 unapplied migration(s).'
Перейдя по адресу увидим наше первое django приложение


## Теперь пойдем модифицировать то как у нас выглядит URLs
Мы хотим что бы, при переходе на корень сайта, нам выдавалось
Привет пользователь и сегодня, (такая-то) дата, для примера, что бы наш
сайт что-то динамически уже отображал.
Нам нужно сделать шаблон страницы которую будем отдавать пользователю, ведь если мы ходим
что б на странице отображалась текущая дата, мы ведь не будем делать отдельный шаблон для
сегодня потом для завтра и так далее... Мы сделаем шаблон в котором объявим правила, 
в это место на странице вставляем текущее число, или день недели, и такой шаблон делаем
один раз, а показывать его Django будет много раз, и в зависимости от времени будет генерировать 
разные значения, и пользователь будет видеть соответствующий контент, в нашем случае, сегодняшнюю дату.

## Работа с простыми шаблонами в проекте.
Чтобы такие шаблоны куда-то складывать, прямо в корне нашем проекте, создадим новую папку,
с названием (templates) и там будут лежать все наши шаблоны.
Далее в папке (templates) создадим файл (index.html)
Заполним его простой разметкой.
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TODO App index</title>
</head>
<body>
    <h1>Welcome to our TODO App!</h1>>
</body>
</html>
```
Тут, пока нет ничего динамического. Мы хотим просто отобразить, что-бы убедится что страница работает,
и увидим то что, именно мы написали.
Для этого нам нужно в настройках указать где находится наша папка с шаблонами, а она находится:
в корне проекта(корень проекта в переменной BASE_DIR), что-бы построить новые пути в папке с проектом,
достаточно сделать просто `BASE_DIR / 'subdir'` (subdir это папка к которой мы хотим указать в корне проекта).
В файле settings.py, в переменную TEMPLATES меняет это `'DIRS': [],'` на это `'DIRS': [BASE_DIR / 'templates'],`

После этого остается только научится отдавать такой простой шаблон пользователю.
Определим что будем отдавать эту страницу по корню нашего сайта. 
Для этого в файле urls.py в переменной urlpatterns добавляем путь к нашему шаблону
`path(""),`
Что же мы тут должны отдать, мы должны объяснить django, что мы хотим отрисовать 
шаблон в папке (templates/index.html).
Для этого, из django импортируем TemplateView который находится в
`from django.views.generic import TemplateView`
А через метод as_view() указать template_name="templates/index.html"
Поэтому окончательный путь будет выглядеть так
`path("", TemplateView.as_view(template_name="index.html"))`
Так-как мы уже указали что шаблоны находятся в папке templates

Теперь перезапустив наш сервер
`python manage.py runserver`

После чего увидим нашу простенькую страничку по адресу 
[link](http://127.0.0.1:8000)

Можем что угодно добавить на сайт дополнительно, и у нас это все отобразится,
так как шаблон отдается каждый раз заново, при обновлении страницы. И сервер нам упрощает
жизнь тем что при изменении кода сам перезапускается и подхватывает сделанные изменения.

## Добавление в наш шаблон динамического контента.
Почему мы называем это шаблоном (templates), а не просто html страница.
Все дело в том что, в этот код мы можем добавлять динамическую часть которая 
будет меняться, в зависимости от того что происходит.
Есть теги которые можно добавить в шаблон, а любое обращение к объектам в шаблоне это теги встроенные.
Самый простой тег - это текущее время (now) почитать по ссылке [link](https://docs.djangoproject.com/en/5.1/ref/templates/builtins/#now)
Встроенный тег (now) его можно использовать так:

`It is {% now "jS F Y H:i" %}`

Про смысл этих букв можно почитать по ссылке [link](https://docs.djangoproject.com/en/5.1/ref/templates/builtins/#std-templatefilter-date)
фигурные скобки `{% %}` означают открытие и закрытие тега
Все что происходит внутри такого тега это вызов функции (now) с некоторыми параметрами ("jS F Y H:i")
аргументами функции, тут это сделано в стиле django.
j - текущая дата, s - суффикс для дня 
F - полный месяц в текущий момент
и так далее можно в документации разобраться.

Теперь добавим такой тег нам на страничку в шаблоне index.html
поместим его в заголовок <h3>
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TODO App index</title>
</head>
<body>
    <h1>Welcome to our TODO App!</h1>>
    <h2>Work in progress</h2>
    <h3>It is {% now "jS F Y H:i" %}</h3>
</body>
</html>
```
Важно отметить что выводится дата будет, соответствующая моменту в который пользователь
запросил страницу, то есть динамически. Именно так работают динамические шаблоны, они
'отрисовываются' каждый раз когда пользователь запрашивает страницу.

Есть одно неудобство, в программе pycharm, в бесплатной версии нет возможности работать с
django шаблонами (нужна версия professional).

Поэтому удобнее работать с другим редактором Visual Studio Code
Который нам предоставляет возможность при помощи плагинов добавить поддержку django.
А именно установим плагин django autor: Baptiste Darthenay. Это хороший плагин для
работы с templates django. Так возможно будет проще писать код.

В документации можно найти и другие теги которые есть и можно попробовать много всего
